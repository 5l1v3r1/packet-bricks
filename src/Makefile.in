#---------------------------------------------------------------------#
SRCS := $(shell ls *.c)

_OBJ := $(SRCS:%.c=%.o)
OBJ := $(patsubst %,$(OBJDIR)/%,$(_OBJ))

$(OBJDIR)/%.o: %.c
	$(MSG) "   CC $<"
	$(HIDE) $(CC) -c -o $@ $< $(CFLAGS) $(INCLUDE) $(NETMAP_INCLUDE)

all: $(OBJ)
	cd $(OSARCH) && $(MAKE)
	cd elements && $(MAKE)

.PHONY: clean

clean:
	cd $(OSARCH) && $(MAKE) clean
	cd elements && $(MAKE) clean
	$(RM) -rf *~
	$(RM) -rf $(OBJDIR)

distclean:
	cd $(OSARCH) && $(MAKE) distclean
	cd elements && $(MAKE) distclean
	$(RM) -rf Makefile
#---------------------------------------------------------------------#
